<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vincent Bohlen Hub - Location Setup</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .coordinates {
            font-family: monospace;
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìç Vincent Bohlen Hub Location Setup</h1>
        
        <div class="section">
            <h3>Step 1: Get Current Location</h3>
            <p>Click the button below to get your current GPS coordinates. Make sure you're at Vincent Bohlen Hub when you do this!</p>
            <button onclick="getCurrentLocation()">Get My Current Location</button>
            <div id="currentLocation" class="result"></div>
        </div>

        <div class="section">
            <h3>Step 2: Manual Coordinates (Alternative)</h3>
            <p>If you know the exact coordinates, enter them here:</p>
            <div>
                <label>Latitude: </label>
                <input type="number" id="manualLat" step="0.000001" placeholder="-26.2041" style="width: 150px; padding: 5px;">
            </div>
            <div style="margin-top: 10px;">
                <label>Longitude: </label>
                <input type="number" id="manualLng" step="0.000001" placeholder="28.0473" style="width: 150px; padding: 5px;">
            </div>
            <button onclick="useManualCoordinates()" style="margin-top: 10px;">Use These Coordinates</button>
        </div>

        <div class="section">
            <h3>Step 3: Test Location Recognition</h3>
            <p>Test if the coordinates will be recognized as Vincent Bohlen Hub:</p>
            <button onclick="testLocation()">Test Location Recognition</button>
            <div id="testResult" class="result"></div>
        </div>

        <div class="section">
            <h3>Step 4: Update Configuration</h3>
            <p>Copy this code and update your <code>src/config/locationConfig.ts</code> file:</p>
            <div id="configCode" class="code-block">
// Click "Get Current Location" or enter manual coordinates first
            </div>
        </div>

        <div class="section">
            <h3>üìã Instructions for Google Maps Method</h3>
            <ol>
                <li>Go to <a href="https://maps.google.com" target="_blank">Google Maps</a></li>
                <li>Search for "Vincent Bohlen Hub" or navigate to the location</li>
                <li>Right-click on the exact spot and select "What's here?"</li>
                <li>Copy the coordinates that appear</li>
                <li>Enter them in Step 2 above</li>
            </ol>
        </div>
    </div>

    <script>
        let currentCoords = null;

        function getCurrentLocation() {
            const resultDiv = document.getElementById('currentLocation');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result info';
            resultDiv.innerHTML = 'üîç Getting your location...';

            if (!navigator.geolocation) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = '‚ùå Geolocation is not supported by this browser.';
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude, accuracy } = position.coords;
                    currentCoords = { latitude, longitude };
                    
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `
                        ‚úÖ Location found!<br>
                        <strong>Latitude:</strong> ${latitude}<br>
                        <strong>Longitude:</strong> ${longitude}<br>
                        <strong>Accuracy:</strong> ¬±${Math.round(accuracy)}m
                    `;
                    
                    updateConfigCode(latitude, longitude);
                },
                (error) => {
                    resultDiv.className = 'result error';
                    let errorMsg = '‚ùå Error getting location: ';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMsg += 'Location access denied by user.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMsg += 'Location information unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMsg += 'Location request timed out.';
                            break;
                        default:
                            errorMsg += 'Unknown error occurred.';
                    }
                    resultDiv.innerHTML = errorMsg;
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }

        function useManualCoordinates() {
            const lat = parseFloat(document.getElementById('manualLat').value);
            const lng = parseFloat(document.getElementById('manualLng').value);
            
            if (isNaN(lat) || isNaN(lng)) {
                alert('Please enter valid latitude and longitude values.');
                return;
            }
            
            currentCoords = { latitude: lat, longitude: lng };
            updateConfigCode(lat, lng);
            
            const resultDiv = document.getElementById('currentLocation');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result success';
            resultDiv.innerHTML = `
                ‚úÖ Manual coordinates set!<br>
                <strong>Latitude:</strong> ${lat}<br>
                <strong>Longitude:</strong> ${lng}
            `;
        }

        function testLocation() {
            if (!currentCoords) {
                alert('Please get current location or enter manual coordinates first.');
                return;
            }

            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result info';
            
            // Simulate the location recognition logic
            const hubLat = currentCoords.latitude;
            const hubLng = currentCoords.longitude;
            const testLat = currentCoords.latitude + 0.001; // Slightly offset for testing
            const testLng = currentCoords.longitude + 0.001;
            
            const distance = Math.sqrt(
                Math.pow(testLat - hubLat, 2) + Math.pow(testLng - hubLng, 2)
            );
            
            const radius = 0.01; // 1km radius
            const isRecognized = distance <= radius;
            
            if (isRecognized) {
                resultDiv.className = 'result success';
                resultDiv.innerHTML = `
                    ‚úÖ Location will be recognized as "Vincent Bohlen Hub"<br>
                    <strong>Distance from center:</strong> ~${Math.round(distance * 111 * 1000)}m<br>
                    <strong>Within radius:</strong> Yes (${radius * 111}km radius)
                `;
            } else {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    ‚ùå Location will NOT be recognized<br>
                    <strong>Distance from center:</strong> ~${Math.round(distance * 111 * 1000)}m<br>
                    <strong>Radius needed:</strong> ${radius * 111}km<br>
                    Consider increasing the radius in the config.
                `;
            }
        }

        function updateConfigCode(lat, lng) {
            const configCode = `export const VINCENT_BOHLEN_HUB: LocationConfig = {
  name: 'Vincent Bohlen Hub',
  latitude: ${lat},
  longitude: ${lng},
  radius: 0.01,        // ~1km radius - adjust as needed
  address: 'Vincent Bohlen Hub, South Africa'
};`;
            
            document.getElementById('configCode').textContent = configCode;
        }
    </script>
</body>
</html>
